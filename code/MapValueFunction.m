% 三维无人机航迹优化

%% 地图值函数
function Value = MapValueFunction(x,y)
%实验一
%地形常数
a = 1; b = 1; c = 1; d = 1; e = 1; f = 1; g = 1;
z = sin(y + a)+b*sin(x)+c*cos(d*(y^2 + x^2))+e*cos(y) + ...
            f*sin(f*(y^2+x^2))+g*cos(y);
% z = 0;
%山峰模型
%% 山峰模型创建
A = [
    25,100;
    100,25
    50,140;
    150,45;
    110,150;
    170,120

        ]; % 山峰坐标点
h0 = 0; %山峰最低位置

hi = [80;55;70;65;54;50];

% 将坡度减小，使山峰更陡

ai = [15;18; 20; 15; 19; 15];
bi = [15;18; 20; 15; 19; 15];

h = sum(hi.*exp(-(x-A(:,1)).^2./ai.^2 - (y-A(:,2)).^2./bi.^2))+h0;
Value = max(z,h);
% Value = h;

end

% function Value = MapValueFunction(x, y)
%     % 地形常数
%     a = 1; b = 1; c = 1; d = 1; e = 1; f = 1; g = 1;
%     z = sin(y + a) + b * sin(x) + c * cos(d * (y^2 + x^2)) + e * cos(y) + ...
%         f * sin(f * (y^2 + x^2)) + g * cos(y);
%     % z = 0;
% 
%     % 山峰模型创建
%     %% 山峰模型
%     % 手动设置山峰坐标点和参数，避开对角线区域
%     A = [
%         20, 100;
%         30, 150;
%         50, 10;
%         %60, 70;
%         70, 180;
%         90, 50;
%         123, 51;
%         110, 160;
%         120, 20;
%         130, 70;
%         140, 180;
%         150, 50;
%         61, 156;
%         170, 100;
%         180, 30;
%         %20, 30;
%         30, 80;
%         40, 160;
%         50, 130;
%         %60, 20;
%         80, 150;
%         %90, 110;
%         100, 60;
%         110, 10;
%         170, 48;
%         %130, 140;
%         140, 40;
%         150, 90;
%         %160, 170;
%         170, 60;
%         190,20;
%         20,190;
%         20,135;
%         135,200;
%         90,190;
%         190,90;
%         25,125;
%         125,25
% 
%     ];
%     h0 = 0; % 山峰最低位置
%     hi = [
%         80; 55; 70; 65; 54; 50;
%         75; 60; 68; 66; 52; 53;
%         78; 59; 63; 64; 57; 69;
%         62; 67; 51; 71; 55; 65;
%         62; 67; 51; 71; 55; 65;
%         56;60
%     ]; % 山峰的高度
%     % 将坡度减小，使山峰更陡
%     ai = [
%         15; 18; 20; 15; 19; 15;
%         17; 16; 14; 19; 15; 18;
%         16; 14; 19; 17; 15; 16;
%         18; 14; 19; 15; 17; 16;
%         16; 14; 19; 17; 15; 16;
%         17;15
%     ] / 1.4; % 山峰的X方向坡度
%     bi = [
%         15; 18; 20; 15; 19; 15;
%         17; 16; 14; 19; 15; 18;
%         16; 14; 19; 17; 15; 16;
%         18; 14; 19; 15; 17; 16;
%         16; 14; 19; 17; 15; 16;
%         17;15
%     ] / 1.4; % 山峰的Y方向坡度
% 
%     h = sum(hi .* exp(-((x - A(:, 1)).^2 ./ ai.^2) - ((y - A(:, 2)).^2 ./ bi.^2))) + h0;
% 
%     Value = max(z, h);
%  end
